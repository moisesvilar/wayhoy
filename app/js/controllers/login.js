angular.module("angularApp").controller("LoginController",["$scope","$rootScope","$location","md5","store","LoginService","USER","PASSWORD","REMEMBER",function(a,d,b,l,c,e,f,g,h){function m(){var a=c.get("wayhoy_user"),b=c.get("wayhoy_pass"),b=cryptofoo.hash("md5",a+b),a=apoint+"luk/checkidR.php?u="+encodeURIComponent(a)+"&t="+b;$.get(a,function(a){a=$.trim(a.split(":")[0]);"dual-link"==a&&sessionStorage.setItem("user_id_r",a)})}function k(){a.model.isLogin=!0;a.model.collapsed=!0;m();b.path("album")}
a.model={email:void 0,password:void 0,remember:!1,collapsed:!0,isLogin:!1};a.isHome="album/"==d.location.path();if(d=c.get(h)){var n=c.get(f),p=c.get(g);e.login(n,p,d,function(a){if(a)return b.path("home"),alert(a);k()})}a.login=function(){e.login(a.model.email,l.createHash(a.model.password),a.model.remember,function(a){if(a)return b.path("home"),alert(a);k()})};a.closeSession=function(){c.set(f,void 0);c.set(g,void 0);c.set(h,void 0);a.model.isLogin=!1;a.model.collapsed=!1;b.path("home")}}]);